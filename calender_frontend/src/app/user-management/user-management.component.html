<div class="ui-g-12">
    <div class="card card-w-title">
        <p-messages></p-messages>
        <p-table #dt [columns]="cols" [paginator]="true" [rows]="10" [rowsPerPageOptions]="[10,25,50]"        
            [value]="users" dataKey="code" selectionMode="single" styleClass="ui-table-cars">
            <ng-template pTemplate="caption">
                <div>
                    <div style="text-align: left;">
                            <label style="margin-left: 50%;">Users</label>
                    </div>
                </div>
            </ng-template>
            <ng-template let-columns pTemplate="header">
                <tr>
                    <th *ngFor="let col of columns" [ngSwitch]="col.field" [pSortableColumn]="col.field" >
                        {{col.header}}
                        <p-sortIcon [field]="col.field"></p-sortIcon>
                    </th>
                </tr>
                
                <tr>
                    <th *ngFor="let col of columns" [ngSwitch]="col.field" style="padding: .5em;">
                        <input (input)="dt.filter($event.target.value, col.field, 'startsWith')" *ngSwitchCase="'username'" class="ui-column-filter" pInputText
                        placeholder="Starts with" style="width: 100%; margin-top: 0;"
                        type="text">
                        <input (input)="dt.filter($event.target.value, col.field, 'contains')" *ngSwitchCase="'email'" class="ui-column-filter" pInputText
                        placeholder="contains" style="width: 100%; margin-top: 0;"
                        type="text">
                        <input (input)="dt.filter($event.target.value, col.field, 'contains')" *ngSwitchCase="'fullName'" class="ui-column-filter" pInputText
                        placeholder="contains" style="width: 100%; margin-top: 0;"
                        type="text">
                        <input (input)="dt.filter($event.target.value, col.field, 'contains')" *ngSwitchCase="'sector'" class="ui-column-filter" pInputText
                        placeholder="contains" style="width: 100%; margin-top: 0;"
                        type="text">
                    </th>
                </tr>
            </ng-template>
            <ng-template let-columns="columns" let-rowData pTemplate="body">
                <tr [pEditableRow]="rowData" [pSelectableRow]="rowData">
                    <td>{{rowData.username}}</td>
                    <td>{{rowData.email}}</td>
                    <td>{{rowData.fullName}}</td>
                    <td>{{rowData.sector}}</td>
                    <td *ngIf="rowData.admin; else notAdmin">
                        <i class="pi pi-check" style="color:lime; font-size: 2em;"></i>
                    </td>
                    <ng-template #notAdmin>
                        <td>
                            <i class="pi pi-times" style="color: red; font-size: 2em;"></i>
                        </td>
                    </ng-template>
                    <td><button (click)="editUser(rowData.username)" title="edit" class="ui-button-info" icon="pi pi-user-edit"
                        pButton></button></td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>